# CodePop コンテンツ作成ガイド 📚

このドキュメントは、CodePop のレッスンコンテンツを追加・編集する際のルールとベストプラクティスをまとめたものです。

---

## 1. 基本原則 ✨

### 対象ユーザー

- **完全な初心者** を想定
- プログラミング経験ゼロの人が最初から理解できること

### 言語

- **すべて日本語** で記述
- 専門用語は必ず説明を添える
- 絵文字は **UI 上では使用禁止**（コード内やドキュメントは OK）

---

## 2. チャレンジの種類 🎮

### 2.1 `LEARN` - 講義スライド

**必ず新しい概念の前に配置すること！**

````json
{
	"type": "LEARN",
	"content": "# タイトル\n\n説明文...\n\n```python\nコード例\n```\n\n## ポイント\n- 箇条書きで要点を整理"
}
````

**ルール:**

- Markdown 形式で記述
- 見出し（`#`）でタイトルを付ける
- コードブロック（` ``` `）でサンプルコードを表示
- 1 スライドに詰め込みすぎない（3〜5 ポイント程度）

### 2.2 `SELECT` - 選択問題（クイズ）

```json
{
	"type": "SELECT",
	"question": "質問文（Markdown可）",
	"options": ["選択肢1", "選択肢2", "選択肢3"],
	"correctOption": "正解の選択肢（optionsと完全一致）"
}
```

**ルール:**

- 選択肢は 3 つが推奨（2〜4 つまで）
- 正解が明確であること
- ひっかけ問題は避ける（初心者向け）

### 2.3 `CODE` - コード記述問題

```json
{
	"type": "CODE",
	"question": "問題文（Markdown可）",
	"initialCode": "# ヒントやボイラープレート\n",
	"correctOption": "正解判定に使うキーワード（例: print）"
}
```

**ルール:**

- `initialCode` にヒントを含める
- `correctOption` は現在「コードにこの文字列が含まれているか」で判定
- 将来的にはより高度な判定を追加予定

---

## 3. レッスン構成の原則 📖

### 必須フロー

1. **LEARN** → 新しい概念を説明
2. **SELECT** → 理解度を確認（任意）
3. **CODE** → 実際に書いてもらう

### 例：変数を教える場合

```
LEARN: 変数とは何か、クォートの使い方を説明
  ↓
SELECT: 正しい変数宣言を選ぶ
  ↓
CODE: 実際に変数を宣言してprintする
```

### NG 例

```
❌ いきなりSELECTで「変数とは？」と聞く（まだ教えてない！）
❌ LEARNなしでCODE問題を出す
```

---

## 4. 初心者への配慮 🌱

### 必ず説明すべきこと（初出時）

- [ ] `print()` の使い方
- [ ] 文字列は `"` または `'` で囲む
- [ ] 変数は「箱」のようなもの
- [ ] 数値はクォートなしで書く
- [ ] 四則演算の記号（`+`, `-`, `*`, `/`, `%`）
- [ ] コメント（`#`）の意味

### 避けるべきこと

- 専門用語をいきなり使う
- 長すぎるコード例
- 複数の概念を一度に教える

---

## 5. データベースへの追加方法 🗄️

### ファイル場所

`web/supabase/schema.sql`

### レッスン追加例

```sql
insert into lessons (unit_id, title, "order", challenges)
values (1, 'レッスン名', 順番, '[
  {
    "type": "LEARN",
    "content": "..."
  },
  {
    "type": "SELECT",
    "question": "...",
    "options": ["...", "...", "..."],
    "correctOption": "..."
  }
]'::jsonb);
```

### 注意事項

- JSON 内のダブルクォートは `\"` でエスケープ
- 改行は `\n` で表現
- SQL を実行後、Supabase ダッシュボードで再適用が必要

---

## 6. チェックリスト ✅

新しいレッスンを作る前に確認：

- [ ] 新しい概念には必ず LEARN スライドがある
- [ ] 日本語で書かれている
- [ ] 初心者が理解できる説明になっている
- [ ] コード例が含まれている（LEARN の場合）
- [ ] 正解が明確である
- [ ] テスト実行して動作確認した

---

## 7. 今後の拡張予定 🚀

- [ ] より高度なコード判定（出力の完全一致、変数の値チェック）
- [ ] 画像・GIF の埋め込み対応
- [ ] ヒント機能
- [ ] コース間の依存関係管理

---

**最終更新:** 2026-01-08
